---
import SectionHeader from "@/components/layouts/SectionHeader.astro";
import Card from "@/components/ui/Card.astro";
import Button from "@/components/ui/Button.astro";
import { contactMethods, icons } from "@/data/site";
import { getArrowRightIcon } from "@/utils/icons";

const heading = "Get in touch";
const subtitle =
  "Got an interesting project? Let's talk about architecture, APIs, or infrastructure.";
---

<section id="contact">
  <div class="container">
    <SectionHeader title={heading} subtitle={subtitle} />

    <div class="contact-grid">
      <!-- Contact Methods -->
      <div class="space-y-xl">
        {
          contactMethods.map((method) => (
            <Card>
              <div class="flex items-start gap-y-6">
                <div class={`icon icon--${method.variant} flex-shrink-0`}>
                  <span
                    set:html={
                      icons[
                        method.icon === "mail"
                          ? "mail-lg"
                          : method.icon === "code"
                            ? "code-lg"
                            : (method.icon as keyof typeof icons)
                      ]
                    }
                  />
                </div>

                <div class="flex-1">
                  <h3 class="text-primary mb-xs text-lg font-bold">
                    {method.label}
                  </h3>
                  <p class="text-secondary mb-md leading-relaxed">
                    {method.value}
                  </p>
                  <Button
                    variant={method.variant}
                    size="sm"
                    href={method.action}
                    aria-label={`Contact via ${method.label}: ${method.value}`}
                  >
                    Get in touch
                    <span set:html={getArrowRightIcon(16, 16)} aria-hidden="true" />
                  </Button>
                </div>
              </div>
            </Card>
          ))
        }
      </div>

      <!-- Contact Form -->
      <Card>
        <div class="mb-lg">
          <h3 class="text-primary mb-sm text-2xl font-bold">
            Send me a message
          </h3>
          <p class="text-secondary leading-relaxed">
            Briefly describe your project and I'll get back to you within 24
            hours.
          </p>
        </div>

        <form class="space-y-lg" novalidate>
          <div class="gap-md grid grid-cols-1 md:grid-cols-2">
            <div class="form-group">
              <label for="name" class="form-label">Name*</label>
              <input
                id="name"
                name="name"
                type="text"
                required
                placeholder="Your name"
                class="form-input"
                aria-describedby="name-error"
                aria-invalid="false"
              />
              <div
                id="name-error"
                class="form-error"
                role="alert"
                aria-live="polite"
              >
              </div>
            </div>
            <div class="form-group">
              <label for="email" class="form-label">Email*</label>
              <input
                id="email"
                name="email"
                type="email"
                required
                placeholder="your@email.com"
                class="form-input"
                aria-describedby="email-error"
                aria-invalid="false"
              />
              <div
                id="email-error"
                class="form-error"
                role="alert"
                aria-live="polite"
              >
              </div>
            </div>
          </div>

          <div class="form-group">
            <label for="subject" class="form-label">Subject*</label>
            <input
              id="subject"
              name="subject"
              type="text"
              required
              placeholder="What would you like to talk about?"
              class="form-input"
              aria-describedby="subject-error"
              aria-invalid="false"
            />
            <div
              id="subject-error"
              class="form-error"
              role="alert"
              aria-live="polite"
            >
            </div>
          </div>

          <div class="form-group">
            <label for="message" class="form-label">Message*</label>
            <textarea
              id="message"
              name="message"
              rows="6"
              required
              placeholder="Tell me about your project..."
              class="form-input form-textarea"
              aria-describedby="message-error"
              aria-invalid="false"></textarea>
            <div
              id="message-error"
              class="form-error"
              role="alert"
              aria-live="polite"
            >
            </div>
          </div>

          <div
            class="gap-md flex flex-col items-start justify-between sm:flex-row sm:items-center"
          >
            <p class="text-secondary max-w-xs text-sm leading-relaxed">
              By submitting, you agree to be contacted. No spam.
            </p>
            <Button type="submit" size="lg" aria-describedby="submit-status">
              Send Message
              <svg
                width="20"
                height="20"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                viewBox="0 0 24 24"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M5 12h14M13 6l6 6-6 6"></path>
              </svg>
            </Button>
          </div>
          <div
            id="submit-status"
            class="form-status"
            role="status"
            aria-live="polite"
          >
          </div>
        </form>
      </Card>
    </div>
  </div>
</section>
