---
import SectionHeader from "@/components/layouts/SectionHeader.astro";
import ServiceCard from "@/components/layouts/ServiceCard.astro";
import Card from "@/components/ui/Card.astro";
import Button from "@/components/ui/Button.astro";
import { getAllServices } from "@/utils/services";

const services = await getAllServices();
---

<section id="services" class="services-section scroll-reveal">
  <div class="container">
    <SectionHeader
      title="Professional Services"
      subtitle="Technical solutions and consulting tailored to your project's needs."
    />

    <div class="services-grid mb-4xl" style="padding-top: var(--space-3xl); margin-bottom: var(--space-4xl);">
      {
        services.map(({ data: service }) => (
          <ServiceCard
            name={service.name}
            subtitle={service.subtitle}
            description={service.description}
            features={service.features}
            cta={service.cta}
            featured={service.featured}
          />
        ))
      }
    </div>

    <!-- Bottom CTA -->
    <div class="text-center" style="margin-top: var(--space-4xl); padding-top: var(--space-xl);">
      <Card class="mx-auto max-w-3xl">
        <h3 class="text-primary mb-md text-2xl font-bold">
          Can't find what you need?
        </h3>
        <p class="text-secondary mb-lg leading-relaxed">
          Every project is unique. Let's talk about your specific needs and
          create a custom solution.
        </p>
        <Button href="#contact">
          Let's discuss your project
          <svg
            width="16"
            height="16"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
          </svg>
        </Button>
      </Card>
    </div>
  </div>
</section>

<style>
  .services-section {
    padding: var(--space-3xl) 0;
    position: relative;
  }

  .services-grid {
    display: grid;
    gap: var(--space-2xl);
    grid-template-columns: 1fr;
    align-items: stretch;
    margin-bottom: var(--space-4xl);
  }

  @media (min-width: 768px) {
    .services-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: var(--space-xl);
    }
  }

  @media (min-width: 1024px) {
    .services-grid {
      grid-template-columns: repeat(4, 1fr);
      gap: var(--space-xl);
      max-width: 1400px;
      margin: 0 auto;
      padding-top: var(--space-2xl);
    }
  }

  /* Ensure badge visibility on all screen sizes */
  @media (max-width: 767px) {
    .services-grid {
      padding-top: var(--space-2xl);
    }
  }
</style>
